# 20240504

## 目次

- [20240504](#20240504)
  - [目次](#目次)
  - [今回の TODO](#今回の-todo)
  - [参考資料](#参考資料)
  - [単語帳](#単語帳)
  - [ノート](#ノート)
    - [アドレス](#アドレス)
    - [ポインタ](#ポインタ)
    - [ポインタと関数](#ポインタと関数)
    - [NULL ポインタへのアクセス](#null-ポインタへのアクセス)
  - [次回の TODO](#次回の-todo)

## 今回の TODO

## 参考資料

[一週間で身につく C 言語の基本|第２日目：アドレスとポインタ](https://c-lang.sevendays-study.com/ex-day2.html)

## 単語帳

| 単語 | 意味 |
| ---- | ---- |
| TD   | TD   |
| TD   | TD   |

## ノート

### アドレス

変数は、コンピュータのメモリ内に存在している．  
そのありか、住所はアドレス、と呼ばれる．

変数`a`について、  
アドレスは`&a`で取得することが出来る．
バイトサイズは`sizeof(a)`で取得することができる．

`size(int)`, `size(double)`のような感じで、型のサイズを調べることも出来る．

アドレスは、整数型.
`%x`で表示すれば、勝手に十六進数になる．

実行環境によって、変数のアドレスは変わる．
変数にはアドレスがあって、型に依存したサイズが存在している．

### ポインタ

ポインタ、ポインタ変数．  
アドレスを入れることを前提とした変数．

整数型ポインタ変数 p の定義
`int *p;`

変数名の先頭に`*`をつける．

```c
#include <stdio.h>

void show(int, int, int);

int main(void){

    int a = 100;
    int b = 200;
    // ポインタ変数は、NULLで初期化する．
    int *p = NULL;
    // *p は値で、pはアドレスである．

    p = &a; //  pにaのアドレスを代入し、aとして振る舞わせる．
    show(a,b,*p);
    // >> a = 100, b = 200, *p = 100

    *p = 300;   //  aとして振る舞っている*pに値を代入、もちろん自身の値は300となり、aも300になる．
    show(a,b,*p);
    // >> a = 300, b = 200, *p = 300

    p = &b; //  pにbのアドレスを代入し、bとして振る舞わせる．
    show(a,b,*p);
    // >> a = 300, b = 200, *p = 200

    *p = 400;   //  bとして振る舞っている*pに値を代入、もちろん自身の値は400となり、aも400になる．
    show(a,b,*p);
    // >> a = 300, b = 400, *p = 400

    return 0;
}

void show(int n1, int n2, int n3){
    printf("a = %d, b = %d, *p = %d \n", n1, n2, n3);
}
```

ポインタ変数は、初期状態で値を持たないが、  
別の変数 A のアドレスを格納することで、別の変数 A の役割を持つことが出来る．

ただし、ポインタ変数の型は、参照したい変数 A の型と同じにしておく必要がある．

### ポインタと関数

C 言語の関数は、戻り値を一つしか設定できない．
ただし、ポインタを使えば引数を直接いじることにより、
あたかも複数の引数に変更を加えて戻したかのような挙動をさせることが出来る．

```c
#include <stdio.h>

void swap(int*, int*);

int main(void){
    int a = 1;
    int b = 2;
    printf("a = %d, b = %d\n", a, b);
    swap(&a, &b);
    printf("a = %d, b = %d\n", a, b);
}

void swap(int *n1, int *n2){
    int temp = *n1;
    *n1 = *n2;
    *n2 = temp;
}
```

例えば、これは意味がない．

```c
#include <stdio.h>

void swap(int, int);

int main(void){
    int a = 1;
    int b = 2;
    printf("a = %d, b = %d\n", a, b);
    swap(a, b);
    printf("a = %d, b = %d\n", a, b);
}

void swap(int n1, int n2){
    int temp = n1;
    n1 = n2;
    n2 = temp;
}
```

swap が勝手に入れ替えて満足しているだけ．

### NULL ポインタへのアクセス

```c
#include <stdio.h>

int main(void){

    // ポインタ変数の定義
    int *p = NULL;

    // アドレスを指定せずに、値を代入．
    *p = 1;

    return 0;
}
```

アドレスを指定せずに値を代入すると、コンパイルは通るが、実行時エラーとなる．

## 次回の TODO
