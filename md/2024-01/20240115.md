# 2024-01-15

## 目次

- [2024-01-15](#2024-01-15)
  - [目次](#目次)
  - [今回の TODO](#今回の-todo)
  - [参考資料](#参考資料)
  - [ノート](#ノート)
    - [1. シングルトン](#1-シングルトン)
    - [2. キャッシュからインスタンスを再利用して返却](#2-キャッシュからインスタンスを再利用して返却)
    - [3. サブクラスのインスタンス返却](#3-サブクラスのインスタンス返却)
    - [4. イニシャライザーリストでは処理できないロジックを使用して final 変数を初期化する](#4-イニシャライザーリストでは処理できないロジックを使用して-final-変数を初期化する)
    - [ファクリコンストラクタまとめ](#ファクリコンストラクタまとめ)
  - [次回の TODO](#次回の-todo)

## 今回の TODO

1. ファクトリコンストラクタについて調べる

## 参考資料

1. ファクトリ関数について: https://zenn.dev/tsukatsuka1783/articles/flutter_factory
2. イニシャライザリストについて: https://arai.me/flutter%E3%81%A7%E3%81%AE%E3%82%A4%E3%83%8B%E3%82%B7%E3%83%A3%E3%83%A9%E3%82%A4%E3%82%B6%E3%83%AA%E3%82%B9%E3%83%88%E3%81%AE%E6%B4%BB%E7%94%A8%E6%96%B9%E6%B3%95/

## ノート

そもそも、、、
コンストラクタ： クラスのインスタンスが生成される際に、自動的に呼び出されるメソッドや初期化処理

ファクトリコンストラクタの利用例

1. シングルトン
2. キャッシュからインスタンスを再利用して返却
3. サブタイプのインスタンス返却
4. イニシャライザーリストでは処理できないロジックを使用して final 変数を初期化する

### 1. シングルトン

アプリケーション内で唯一のインスタンスを生成・保持するクラス

- グローバルな状態の管理・共有用のクラス
- リソースの共有・効率化をするためのクラス
- データの一貫性・整合性を持つクラス

### 2. キャッシュからインスタンスを再利用して返却

以前に作成したオブジェクトを返却できるクラス
同一のオブジェクトを何度も生成したくない時に利用する．

### 3. サブクラスのインスタンス返却

親クラス(スーパークラス)のコンストラクタが、子クラス(サブクラス)のインスタンスを返すことができる

### 4. イニシャライザーリストでは処理できないロジックを使用して final 変数を初期化する

そもそもイニシャライザーリスト(initializer lists)とは...
コンストラクタの本体が実行される前にインスタンス変数を初期化する方法

```dart
class Myclass{
  final int a;
  int b;

  Myclass(int a, this.b)
    :a = a {
      print("constructor body");
    }
}
```

a はイニシャライザリスト、b はパラメータリストで初期化される．
コロンはイニシャライザリストの開始を意味し、a = a がイニシャライザリストである．
これはコンストラクタの本体が実行される前に行われる．

- final フィールドの初期化をコンストラクタ内で行いたい時にイニシャライザリストを使う．
- スーパークラスのコンストラクタを「非」明示的に呼び出す時にイニシャライザリストを使う．

本題の、イニシャライザリストで処理できないロジックとは、

- イニシャライザリストに動的な値を入れようとすること

似たような動作は、

```dart
late final String initializedValue
```

のように late 接頭辞をつければなんとかなるらしいが、
非同期処理的なことをしているだけなので、あまり複雑なことはできないらしい．

### ファクリコンストラクタまとめ

ファクトリコンストラクタは、コンストラクタの一種である．
コンストラクタで生成したオブジェクトの再利用をしたい時、動的な値で初期化するなど柔軟な初期化をしたい時に役立つ．

## 次回の TODO

チャプター 8: https://zenn.dev/heyhey1028/books/flutter-basics/viewer/dart_3
